--- a/arch/arm/mach-msm/clock-8x60.c	2011-08-02 16:04:21.000000000 -0400
+++ b/arch/arm/mach-msm/clock-8x60.c	2011-09-11 11:21:39.000000000 -0400
@@ -28,6 +28,7 @@
 #include <mach/clk.h>
 #include <mach/msm_xo.h>
 #include <mach/scm-io.h>
+#include <linux/clk.h>
 
 #include "clock-local.h"
 #include "clock-8x60.h"
@@ -2607,7 +2608,25 @@
 
 static int msm_clk_soc_late_init(void)
 {
-	return local_unvote_sys_vdd(HIGH);
+      int rc;
+
+      /* Vote for MMFPB to be at least 64MHz when an Apps CPU is active. */
+      struct clk *mmfpb_a_clk = clk_get(NULL, "mmfpb_a_clk");
+      if (WARN(IS_ERR(mmfpb_a_clk), "mmfpb_a_clk not found (%ld)\n",
+                      PTR_ERR(mmfpb_a_clk)))
+              return PTR_ERR(mmfpb_a_clk);
+      rc = clk_set_min_rate(mmfpb_a_clk, 64000000);
+      if (WARN(rc, "mmfpb_a_clk rate was not set (%d)\n", rc))
+              return rc;
+      rc = clk_enable(mmfpb_a_clk);
+      if (WARN(rc, "mmfpb_a_clk not enabled (%d)\n", rc))
+              return rc;
+
+      /* Remove temporary vote for HIGH vdd_dig. */
+      rc = local_unvote_sys_vdd(HIGH);
+      WARN(rc, "local_unvote_sys_vdd(HIGH) failed (%d)\n", rc);
+
+      return rc;
 }
 late_initcall(msm_clk_soc_late_init);
 
--- a/drivers/mmc/host/msm_sdcc.c	2011-08-02 16:04:22.000000000 -0400
+++ b/drivers/mmc/host/msm_sdcc.c	2011-09-11 11:25:41.000000000 -0400
@@ -884,6 +884,13 @@
 #if IRQ_DEBUG
 		msmsdcc_print_status(host, "irq0-p", status);
 #endif
+#ifdef CONFIG_MMC_MSM_SDIO_SUPPORT
+                if (status & MCI_SDIOINTROPE) {
+                        if (host->sdcc_suspending)
+                                wake_lock(&host->sdio_suspend_wlock);
+                        mmc_signal_sdio_irq(host->mmc);
+                }
+#endif
 
 		if ((host->plat->dummy52_required) &&
 		    (host->dummy_52_state == DUMMY_52_STATE_SENT)) {
@@ -905,13 +912,6 @@
 		}
 
 		data = host->curr.data;
-#ifdef CONFIG_MMC_MSM_SDIO_SUPPORT
-		if (status & MCI_SDIOINTROPE) {
-			if (host->sdcc_suspending)
-				wake_lock(&host->sdio_suspend_wlock);
-			mmc_signal_sdio_irq(host->mmc);
-		}
-#endif
 		/*
 		 * Check for proper command response
 		 */
@@ -2054,18 +2054,11 @@
 	struct msmsdcc_host *host = mmc_priv(mmc);
 	int rc = 0;
 
-	rc = msmsdcc_runtime_resume(dev);
+	if (!pm_runtime_suspended(dev))
+		rc = msmsdcc_runtime_resume(dev);
 	if (host->plat->status_irq)
 		enable_irq(host->plat->status_irq);
 
-	/* Update the run-time PM status */
-	pm_runtime_disable(dev);
-	rc = pm_runtime_set_active(dev);
-	if (rc < 0)
-		pr_info("%s: %s: failed with error %d", mmc_hostname(mmc),
-				__func__, rc);
-	pm_runtime_enable(dev);
-
 	return rc;
 }
 
--- a/arch/arm/mach-msm/devices-msm8x60.c	2011-08-02 16:04:21.000000000 -0400
+++ b/arch/arm/mach-msm/devices-msm8x60.c	2011-09-11 11:27:17.000000000 -0400
@@ -627,8 +627,8 @@
 	{
 		.src = MSM_BUS_MASTER_GRAPHICS_3D,
 		.dst = MSM_BUS_SLAVE_EBI_CH0,
-		.ab = 2008000000U,
-		.ib = 2008000000U,
+               .ab = 1300000000U,
+               .ib = 1300000000U,
 	},
 };
 
@@ -663,7 +663,7 @@
 		.src = MSM_BUS_MASTER_GRAPHICS_2D_CORE0,
 		.dst = MSM_BUS_SLAVE_EBI_CH0,
 		.ab = 0,
-		.ib = 2096000000U,
+               .ib = 1300000000U,
 	},
 };
 
@@ -698,7 +698,7 @@
 		.src = MSM_BUS_MASTER_GRAPHICS_2D_CORE1,
 		.dst = MSM_BUS_SLAVE_EBI_CH0,
 		.ab = 0,
-		.ib = 2096000000U,
+               .ib = 1300000000U,
 	},
 };
 
--- a/drivers/mmc/core/mmc.c	2011-08-02 16:04:22.000000000 -0400
+++ b/drivers/mmc/core/mmc.c	2011-09-11 11:34:25.000000000 -0400
@@ -610,16 +610,20 @@
  */
 static int mmc_suspend(struct mmc_host *host)
 {
+	int err = 0;
+
 	BUG_ON(!host);
 	BUG_ON(!host->card);
 
 	mmc_claim_host(host);
-	if (!mmc_host_is_spi(host))
+	if (mmc_card_can_sleep(host))
+		err = mmc_card_sleep(host);
+	else if (!mmc_host_is_spi(host))
 		mmc_deselect_cards(host);
 	host->card->state &= ~MMC_STATE_HIGHSPEED;
 	mmc_release_host(host);
 
-	return 0;
+	return err;
 }
 
 /*
